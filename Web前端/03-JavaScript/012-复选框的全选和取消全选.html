<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>复选框的全选和取消全选</title>
    </head>
    <body>
        <script onload="bindClick()">
            // function checkAll(){
            //     //获取第一个复选框的选中状态
            //     var firstchk = document.getElementById("firstchk")
            //     //console.log(firstchk.checked)
            //     if(firstchk.checked){
            //         var aihaos = document.getElementsByName("aihao")
            //         for(var i = 0; i < aihaos.length; i++){
            //             aihaos[i].checked = true;
            //         }
            //     }else{
            //         var aihaos = document.getElementsByName("aihao")
            //         for(var i = 0; i < aihaos.length; i++){
            //             aihaos[i].checked = false;
            //         }
            //     }
            // }

            function checkAll(){
                var firstchkElt = document.getElementById("firstchk")
                var aihaosChks = document.getElementsByName("aihao")
                for(var i = 0; i < aihaosChks.length; i++){
                    aihaosChks[i].checked = firstchkElt.checked
                }
            }

            function bindClick(){
                var aihaoChks = document.getElementsByName("aihao")
                for(var i = 0; i < aihaoChks.length; i++){
                    aihaoChks[i].onclick = function(){
                        var count = aihaoChks.length
                        var checkedCount = 0
                        for(var i = 0; i < aihaoChks.length; i++){
                            if(aihaoChks[i].checked){
                                checkedCount++;
                            }
                        }
                        if(count == checkedCount){
                            document.getElementById("firstchk").checked = true;
                        }else{
                            document.getElementById("firstchk").checked = false;
                        }
                    }
                }
            }
        </script>
        <input type="checkbox" id="firstchk" onclick="checkAll()">全选<br>
        <input type="checkbox" name="aihao" value="1">抽烟<br>
        <input type="checkbox" name="aihao" value="2">喝酒<br>
        <input type="checkbox" name="aihao" value="3">烫头<br>
        <input type="checkbox" name="aihao" value="4">睡觉<br>
    </body>
</html>